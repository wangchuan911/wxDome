<!--pages/milestone/milestone.wxml-->
<!-- <text>pages/milestone/milestone.wxml</text> -->
<i-panel title="服务进度">
  <i-card title='定单编码：xxxxxxxx' extra="桂Axxxxxx" wx:for="{{orders}}" wx:for-index="index" wx:for-item="item">
    <view slot="content">
      <i-steps current="2" wx:if="{{item.state==0 && item.isCustOrder}}">
        <i-step status="finish">
          <view slot="title">
            已完成
          </view>
          <view slot="content">
            伙计们正在赶往目的地
          </view>
        </i-step>
        <i-step status="process">
          <view slot="title">
            进行中
          </view>
          <view slot="content">
            伙计们正在呵护您的爱车
          </view>
        </i-step>
        <i-step status="error">
          <view slot="title">
            错误
          </view>
          <view slot="content">
            伙计们不知道跑去哪里了
          </view>
        </i-step>
      </i-steps>
      <i-button wx:if="{{item.state==1 && item.isCustOrder}}" bind:click="payBillBut" type="primary" shape="circle">
        <i-icon size="30"  type="success_fill" />服务完成,请支付({{isNaN(item.orderCost)?"":(item.orderCost+'元')}})
      </i-button>
      <view wx:if="{{item.state==2 && item.isCustOrder}}" style="text-align: center">
        <i-icon size="40" color="#2d8cf0;" type="success_fill" />
        已支付，服务结束
      </view>
      <i-divider height="16" wx:if="{{item.isCustOrder}}"></i-divider>
      <i-row wx:for="{{cols}}" wx:for-index="col-index" wx:for-item="col">
        <i-col span="5" offset="1">
          <i-tag i-class="i-tags" checkable="{{true}}" checked="{{true}}" name="col.id">{{col.name}}</i-tag>
        </i-col>
        <i-col span="16" offset="1" style=" word-break:break-all;">{{item[col.id]}}</i-col>
      </i-row>
        <i-row wx:if="{{item.isCustOrder && item.imgs && item.imgs.length>0}}">
        <i-col span="5" offset="1">
            <i-tag i-class="i-tags" checkable="{{true}}" checked="{{true}}" name="extra">备注</i-tag>
        </i-col>
        <i-col span="16" offset="1" style=" word-break:break-all;">
            <i-tag i-class="i-tag" wx:if="{{item.imgs && item.imgs.length>0}}" checkable="{{true}}" checked="{{false}}" color="blue" type='border' bindtap="preViewPicture" data-idx="{{index}}" data-img-idx="0">图片</i-tag>
        </i-col>
        </i-row>
<!--        <i-divider height="10" wx:if="{{item.isCustOrder && item.imgs && item.imgs.length>0}}"></i-divider>-->
<!--      <i-row i-class="i-row-css" wx:if="{{item.isCustOrder && item.imgs && item.imgs.length>0}}" >-->
<!--          -->
<!--        <i-col wx:for="{{item.imgs}}" wx:for-index="imgIndex" wx:for-item="url" span="4"  offset="{{(imgIndex%5==0)?2:0}}">-->
<!--          <image src="{{url}}" style="width: 50px; height: 50px" bindtap="preViewPicture" data-idx="{{index}}" data-img-idx="{{imgIndex}}"></image>-->
<!--        </i-col>-->
<!--      </i-row>-->
      <!--<i-divider height="20"></i-divider>-->
          <div style="text-align:center;display: flex;justify-content: flex-end;">
            <div class="helper-div" bindtap="callHelpBut" data-idx="{{index}}">
                <i-icon style="display: block" size="28" color="#80848f" type="customerservice" />
              <p>联系客服</p>
            </div>
            <div class="helper-div" wx:if="{{item.state!=2}}" bindtap="callWorkerBut" data-idx="{{index}}">
                <i-icon style="display: block" size="28" color="#80848f" type="interactive" />
              <p>呼叫小伙</p>
            </div>
            <div class="helper-div" wx:if="{{item.state==2}}" bindtap="evalueteBut" data-idx="{{index}}">
              <i-icon style="display: block" size="28" color="#80848f" type="emoji" />
              <p>评价</p>
            </div>
          </div>

      <i-button wx:if="{{item.isWorkOrder}}" bind:click="orderDetailBut" type="primary" data-idx="{{index}}">处理</i-button>
    </view>
  </i-card>
</i-panel>